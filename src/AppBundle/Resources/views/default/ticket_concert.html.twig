{% extends 'base.html.twig' %}

{% block body %}
	<section id="home">	
		<div id="main-slider" class="carousel slide" data-ride="carousel">
			<div class="carousel-inner">
				<div class="item active">
					<img class="img-responsive" src="{{ asset('bundles/app/images/slider/bg4.jpg') }}" alt="slider">
				</div>
			</div>
		</div>    	
    </section>
	<!--/#home-->

	
	<section id="post">
		<div id="twitter-feed" class="carousel slide" data-interval="false">
			<div class="row">
				<div class="post col-md-12">
					<h1>{{ concert.title }}</h1>
					<p id="contenu">
						{{ concert.description|raw }}
					</p>
					<p id="date">
						Date du concert: {{ concert.date|date("d/m/Y") }}
					</p>
					<p id="panel-buttons">
						{#
						<a href="{{ path('') }}" id="update"><span class="glyphicon glyphicon-pencil"></span> Modifier</a><a href="{{ path('') }}" id="delete"><span class="glyphicon glyphicon-remove"></span> Supprimer</a>
						#}
					</p>
					<h4>Reste: <span id="nb_place">{{ concert.places }}</span> places</h4>
					<label>J'ach√®te</label>
					<input type="number" value="1" class="nombre_place"><label>place(s)</label>
					<button data-id="{{ concert.id }}" type="button" class="acheter_place">Valider</button>
				</div>
				{#
				<div class="item">
					<img src="https://pbs.twimg.com/profile_images/443336758403424256/U5bzXI5l.jpeg" alt="">
					<p>Creator of the PHP framework Symfony</p>
					<a href="https://twitter.com/fabpot">Twitter account</a>
				</div>
				#}
			</div>
		</div>		
	</section><!--/#twitter-feed-->
{% endblock %}

{% block javascripts %}
	<script type="text/javascript">
		function $_GET(param) {
			var vars = {};
			window.location.href.replace( 
				/[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
				function( m, key, value ) { // callback
					vars[key] = value !== undefined ? value : '';
				}
			);

			if ( param ) {
				return vars[param] ? vars[param] : null;	
			}
			return vars;

			//http://www.creativejuiz.fr/blog/javascript/recuperer-parametres-get-url-javascript
		}
		$(document).ready(function(){

			$('.acheter_place').click(function(){
				var nb_places = $('.nombre_place').val();
				var id = $(this).attr('data-id');
				if(nb_places != ""){
					if(confirm("Valider votre commande ?")){
						document.location.href = '{{ path("valide_concert") }}?id='+id+'&nbplaces='+nb_places;
					}
				}else{
					$('.nombre_place').val(0);
				}
			});

		});
	</script>
{% endblock %}